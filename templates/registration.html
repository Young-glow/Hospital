<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Реєстратура - Лікарняна система</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>Реєстратура</h1>
            <a href="/logout" class="back-btn">Вийти</a>
        </div>
    </div>

    <div class="container">
        <div class="search-section">
            <input type="text" id="searchInput" class="search-input" placeholder="Пошук по прізвищу...">
            <button class="btn btn-primary" onclick="openNewPatientModal()">+ Новий пацієнт</button>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Прізвище</th>
                        <th>Ім'я</th>
                        <th>По батькові</th>
                        <th>Дата народження</th>
                        <th>Телефон</th>
                        <th>Дії</th>
                    </tr>
                </thead>
                <tbody id="patientsTableBody">
                    <tr>
                        <td colspan="7" class="loading">Завантаження...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="newPatientModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Новий пацієнт</h2>
                <span class="close" onclick="closeNewPatientModal()">&times;</span>
            </div>
            <form id="newPatientForm">
                <div class="form-group">
                    <label>Прізвище *</label>
                    <input type="text" name="last_name" required>
                </div>
                <div class="form-group">
                    <label>Ім'я *</label>
                    <input type="text" name="first_name" required>
                </div>
                <div class="form-group">
                    <label>По батькові</label>
                    <input type="text" name="middle_name">
                </div>
                <div class="form-group">
                    <label>Дата народження</label>
                    <input type="date" name="birth_date">
                </div>
                <div class="form-group">
                    <label>Стать</label>
                    <select name="sex">
                        <option value="O">Не вказано</option>
                        <option value="M">Чоловік</option>
                        <option value="F">Жінка</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Телефон</label>
                    <input type="tel" name="phone">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email">
                </div>
                <div class="form-group">
                    <label>Адреса</label>
                    <input type="text" name="address">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeNewPatientModal()">Скасувати</button>
                    <button type="submit" class="btn btn-primary">Зберегти</button>
                </div>
            </form>
        </div>
    </div>

    <div id="scheduleVisitModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Записати на візит</h2>
                <span class="close" onclick="closeScheduleVisitModal()">&times;</span>
            </div>
            <form id="scheduleVisitForm">
                <input type="hidden" id="visitPatientId" name="patient_id">
                <div class="form-group">
                    <label>Спеціальність *</label>
                    <select id="specialtySelect" name="specialty_id" required onchange="loadDoctors()">
                        <option value="">Оберіть спеціальність</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Лікар *</label>
                    <select id="doctorSelect" name="doctor_id" required>
                        <option value="">Спочатку оберіть спеціальність</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Дата та час *</label>
                    <input type="datetime-local" name="scheduled_start" required>
                </div>
                <div class="form-group">
                    <label>Причина візиту</label>
                    <textarea name="reason" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeScheduleVisitModal()">Скасувати</button>
                    <button type="submit" class="btn btn-primary">Записати</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/registration.js') }}"></script>
</body>
</html>

