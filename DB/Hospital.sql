DROP DATABASE IF EXISTS Hospital_DB;
CREATE DATABASE Hospital_DB CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE Hospital_DB;
SET FOREIGN_KEY_CHECKS = 0;

-- 1) Спеціальності лікарів
CREATE TABLE IF NOT EXISTS specialties (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL UNIQUE
) ENGINE=InnoDB;

INSERT INTO specialties (name) VALUES
('Кардіолог'), -- 1
('Травматолог'), -- 2
('Хірург'), -- 3
('Ендокринолог'), -- 4
('Стоматолог'), -- 5
('Окулист'), -- 6
('Гінеколог'), -- 7
('Уролог'), -- 8
('УЗД-спеціаліст'), -- 9
('Анестезіолог'), -- 10
('Мамолог'), -- 11
('Педіатр'), -- 12
('Невролог'), -- 13
('Психіатр'), -- 14
('Дерматолог'), -- 15
('Сімейний лікар'), -- 16
('Терапевт'); -- 17

-- 2) Лікарі
CREATE TABLE IF NOT EXISTS staff (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    middle_name VARCHAR(100),
    birth_date DATE,
    sex ENUM('M','F','O') DEFAULT 'O',
    phone VARCHAR(30),
    email VARCHAR(255) UNIQUE,
    address VARCHAR(512),
    specialty_id INT NOT NULL,
    active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (specialty_id) REFERENCES specialties(id) ON DELETE RESTRICT
) ENGINE=InnoDB;

INSERT INTO staff (first_name, last_name, middle_name, birth_date, sex, phone, email, address, specialty_id) VALUES
('Олексій','Сидоренко','Петрович','1975-02-02','M','+380501223344','sydorenko.o@gmail.com','Львів, вул. Лесі Українки 3',1),
('Тетяна','Заболотна','Петрівна','1986-12-12','F','+380680756454','zabolotna.t@gmail.com','Львів, вул. Гребінки 8', 2),
('Олег','Шевченко','Васильович','1979-01-03','M','+380680361547','shevchenko.o@gmail.com','Львів, вул. Городоцька 32', 3),
('Олена','Коваленко','Василівна','1990-08-24','F','+380957462849','kovalenko.o@gmail.com','Львів, вул. Зелена 51', 4),
('Михайло','Бондаренко','Олегович','1983-09-12','M','+380864861956','bondarenko.m@gmail.com','Львів, вул. Личаківська 1', 5),
('Катерина','Ткаченко','Микитівна','1996-10-25','F','+380487560480','tkachenko.k@gmail.com','Львів, вул. Степана Бандери 6', 6),
('Даніель','Ковальчук','Олександрович','1992-04-16','M','+380417830505','kovalchuk.d@gmail.com','Львів, вул. Шевченка 11', 7),
('Анастасія','Олійник','Володимирівна','1989-11-03','F','+380994733367','oliinyk.a@gmail.com','Львів, вул. Коперника 51', 7),
('Катерина','Бойко','Андріївна','1983-01-15','F','+380338466754','boiko.k@gmail.com','Львів, вул. Пасічна 8', 8),
('Андрій','Савченко','Андрійович','1979-02-19','M','+380957452626','savchenko.a@gmail.com','Львів, вул. Тарнавського 109', 9),
('Олександра','Мороз','Василівна','1987-03-25','F','+380984076978','moroz.o@gmail.com','Львів, вул. Драгоманова 54', 10),
('Артем','Гриценко','Романович','1990-04--28','M','+380814374957','hrytsenko.a@gmail.com','Львів, вул. Виговського 76', 11),
('Юлія','Мельник','Остапівна','1994-05-06','F','+380004873625','melnyk.y@gmail.com','Львів, вул. Наукова 39', 12),
('Роман','Петренко','Олександрович','1986-06-10','M','+380546359593','petrenko.r@gmail.com','Львів, вул. Дорошенка 10', 12),
('Ярослав','Яковенко','Якович','1984-07-14','M','+38092566835','yakovenko.y@gmail.com','Львів, вул. Куліша 9', 13),
('Ангеліна','Гаврилюк','Михайлівна','1984-08-18','F','+380243425393','havryliuk.a@gmail.com','Львів, вул. Богдана Хмельницього 4', 14),
('Карина','Кушнір','Василівна','1977-09-30','F','+380565678501','kushnir.k@gmail.com','Львів, вул. Пекарська 7', 14),
('Андрій','Лисенко','Іванович','1989-10-11','M','+380831019107','lysenko.a@gmail.com','Львів, вул. Івана Франка 9', 15),
('Богдана','Литвин','Владиславівна','1988-11-16','F','+380646453892','lytvyn.b@gmail.com','Львів, вул. Зелена 8', 17),
('Михайло','Поліщук','Ярославович','1976-12-01','M','+380737789364','polishchuk.m@gmail.com','Львів, вул. Личаківська 9', 16),
('Адріана','Мазур','Олегівна','1990-01-06','F','+380648201045','mazur.a@gmail.com','Львів, вул. Коперника 12', 16),
('Владислав','Марченко','Богданович','1982-02-20','M','+3807352708020','marchenko.v@gmail.com','Львів, вул. Пасічна 22', 16),
('Владислава','Шевчук','Володимирівна','1979-03-10','F','+380756493647','shevchuk.v@gmail.com','Львів, вул. Виговського 11', 16);

-- 3) Користувачі системи
CREATE TABLE IF NOT EXISTS users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    login VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL,
    role ENUM('chief','registrar','doctor') NOT NULL,
    staff_id INT,
    FOREIGN KEY (staff_id) REFERENCES staff(id) ON DELETE SET NULL
) ENGINE=InnoDB;


INSERT INTO users (login, password, role, staff_id) VALUES
('registrator', 'registrator', 'registrar', NULL),
('chief', 'chief', 'chief', NULL),
('sydorenko_oleksii', 'sydorenko', 'doctor', 1),
('zabolotna_tetiana', 'zabolotna', 'doctor', 2),
('shevchenko_oleg', 'shevchenko', 'doctor', 3),
('kovalenko_olena', 'kovalenko', 'doctor', 4),
('bondarenko_mykhailo', 'bondarenko', 'doctor', 5),
('tkachenko_kateryna', 'tkachenko', 'doctor', 6),
('kovalchuk_daniel', 'kovalchuk', 'doctor', 7),
('oliinyk_anastasiia', 'oliinyk', 'doctor', 8),
('boiko_kateryna', 'boiko', 'doctor', 9),
('savchenko_andrii', 'savchenko', 'doctor', 10),
('moroz_oleksandra', 'moroz', 'doctor', 11),
('hrytsenko_artem', 'hrytsenko', 'doctor', 12),
('melnyk_yuliia', 'melnyk', 'doctor', 13),
('petrenko_roman', 'petrenko', 'doctor', 14),
('yakovenko_yaroslav', 'yakovenko', 'doctor', 15),
('havryliuk_anhelina', 'havryliuk', 'doctor', 16),
('kushnir_karyna', 'kushnir', 'doctor', 17),
('lysenko_andrii', 'lysenko', 'doctor', 18),
('lytvyn_bohdana', 'lytvyn', 'doctor', 19),
('polishchuk_mykhailo', 'polishchuk', 'doctor', 20),
('mazur_adriana', 'mazur', 'doctor', 21),
('marchenko_vladyslav', 'marchenko', 'doctor', 22),
('shevchuk_vladyslava', 'shevchuk', 'doctor', 23);

-- 4) Пацієнти
CREATE TABLE IF NOT EXISTS patients (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    middle_name VARCHAR(100),
    birth_date DATE,
    sex ENUM('M','F','O') DEFAULT 'O',
    phone VARCHAR(30),
    email VARCHAR(255) UNIQUE,
    address VARCHAR(512),
    active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB;

INSERT INTO patients (first_name, last_name, middle_name, birth_date, sex, phone, email, address) VALUES
('Стефанія', 'Ковальчук', 'Михайлівна', '1942-03-14', 'F', '+380501112233', 'stefania.kov@gmail.com', 'Львів, вул. Личаківська 112'),
('Йосип', 'Гаврилюк', 'Петрович', '1950-11-05', 'M', '+380671234567', 'yosyp.havryliuk@gmail.com', 'Львів, вул. Городоцька 220'),
('Варвара', 'Тимченко', 'Степанівна', '1939-08-19', 'F', '+380631112233', 'varvara.tym@gmail.com', 'Львів, вул. Зелена 45'),
('Григорій', 'Мельник', 'Васильович', '1948-02-01', 'M', '+380501223300', 'hryhoriy.melnyk@gmail.com', 'Львів, вул. Пасічна 90'),
('Любов', 'Савчин', 'Іванівна', '1955-06-30', 'F', '+380501223301', 'liuba.savchyn@gmail.com', 'Львів, вул. Володимира Великого 34'),
('Мирослава', 'Бойко', 'Олексіївна', '1961-04-12', 'F', '+380501223302', 'myroslava.boyko@gmail.com', 'Львів, вул. Стрийська 78'),
('Володимир', 'Лисенко', 'Богданович', '1953-12-10', 'M', '+380501223303', 'lysenko.v@gmail.com', 'Львів, вул. Наукова 15'),
('Ярослава', 'Гнатів', 'Юріївна', '1945-09-25', 'F', '+380501223304', 'yaroslava.hnativ@gmail.com', 'Львів, вул. Коперника 40'),
('Богдан', 'Шевченко', 'Миколайович', '1959-01-15', 'M', '+380501223305', 'bohdan.shev@gmail.com', 'Львів, вул. Шевченка 100'),
('Вікторія', 'Возняк', 'Сергіївна', '1992-06-25', 'F', '+380501223306', 'vozniak.v@gmail.com', 'Львів, вул. Сихівська 14'),
('Анатолій', 'Дрозд', 'Володимирович', '1965-10-10', 'M', '+380501223307', 'drozd.toly@gmail.com', 'Львів, вул. Любінська 9'),
('Ольга', 'Павлюк', 'Іванівна', '1974-03-05', 'F', '+380501223308', 'pavliuk.olha@gmail.com', 'Львів, вул. Мазепи 15'),
('Остап', 'Гавриш', 'Петрович', '2004-11-22', 'M', '+380501223309', 'havrysh.ostap@gmail.com', 'Львів, пр. Свободи 5'),
('Галина', 'Мельничук', 'Яківна', '1952-05-18', 'F', '+380501223310', 'halyna.mel@gmail.com', 'Львів, вул. Чупринки 60'),
('Данило', 'Захарчук', 'Андрійович', '2002-09-09', 'M', '+380501223311', 'zakharchuk.d@gmail.com', 'Львів, вул. Коновальця 33'),
('Надія', 'Білас', 'Григорівна', '1949-02-14', 'F', '+380501223312', 'nadiia.bilas@gmail.com', 'Львів, вул. Виговського 11'),
('Петро', 'Степаненко', 'Миколайович', '1972-07-07', 'M', '+380501223313', 'stepanenko.p@gmail.com', 'Львів, вул. Степана Бандери 33'),
('Марія', 'Крук', 'Богданівна', '1991-12-01', 'F', '+380501223314', 'kruk.m@gmail.com', 'Львів, вул. Вітовського 9'),
('Михайло', 'Рудий', 'Данилович', '1938-04-29', 'M', '+380501223315', 'rudyi.mykhailo@gmail.com', 'Львів, вул. Героїв УПА 73'),
('Соломія', 'Гірняк', 'Олегівна', '2005-01-11', 'F', '+380501223316', 'hirnyak.s@gmail.com', 'Львів, вул. Антоновича 55'),
('Андрій', 'Костюк', 'Володимирович', '1980-10-20', 'M', '+380501223317', 'kostiuk.a@gmail.com', 'Львів, вул. Сахарова 42'),
('Марія', 'Прокопів', 'Степанівна', '1957-08-15', 'F', '+380501223318', 'prokopiv.maria@gmail.com', 'Львів, вул. Дорошенка 15'),
('Тарас', 'Винник', 'Романович', '2001-06-03', 'M', '+380501223319', 'vynnyk.taras@gmail.com', 'Львів, вул. Варшавська 67'),
('Катерина', 'Шумелда', 'Павлівна', '1963-11-28', 'F', '+380501223320', 'shumelda.k@gmail.com', 'Львів, вул. Замарстинівська 12'),
('Ігор', 'Мазурок', 'Степанович', '1986-09-24', 'M', '+380501223321', 'mazurok.i@gmail.com', 'Львів, вул. Підвальна 3'),
('Анна', 'Кузьма', 'Валентинівна', '2003-03-30', 'F', '+380501223322', 'kuzma.anna@gmail.com', 'Львів, вул. Валова 11'),
('Василь', 'Ільків', 'Орестович', '1947-12-19', 'M', '+380501223323', 'ilkiv.vasyl@gmail.com', 'Львів, вул. Івана Франка 108'),
('Дарина', 'Смаль', 'Андріївна', '1994-07-02', 'F', '+380501223324', 'smal.daryna@gmail.com', 'Львів, вул. Гвардійська 16'),
('Сергій', 'Цимбалюк', 'Анатолійович', '1981-05-10', 'M', '+380501223325', 'tsymbaliuk.s@gmail.com', 'Львів, вул. Коновальця 88'),
('Софія', 'Репета', 'Володимирівна', '1941-10-14', 'F', '+380501223326', 'repeta.sofia@gmail.com', 'Львів, вул. Левицького 24');

-- 5) Візити
CREATE TABLE IF NOT EXISTS visits (
    id INT AUTO_INCREMENT PRIMARY KEY,
    patient_id INT NOT NULL,
    doctor_id INT NOT NULL,
    scheduled_start DATETIME NOT NULL,
    scheduled_end DATETIME,
    status ENUM('scheduled','cancelled','done','no-show','pending_closure') DEFAULT 'scheduled',
    reason VARCHAR(512),
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE,
    FOREIGN KEY (doctor_id) REFERENCES staff(id) ON DELETE CASCADE
) ENGINE=InnoDB;

INSERT INTO visits (patient_id, doctor_id, scheduled_start, scheduled_end, status, reason, notes) VALUES
(1, 20, '2023-05-10 09:00:00', '2023-05-10 09:20:00', 'done', 'Контроль тиску', 'Тиск стабілізовано'),
(1, 20, '2024-02-15 09:00:00', '2024-02-15 09:20:00', 'no-show', 'Плановий огляд', 'Пацієнтка забула про візит'),
(1, 20, '2024-02-20 10:00:00', '2024-02-20 10:20:00', 'done', 'Плановий огляд (перенесений)', 'Скарги на серцебиття, направлення до кардіолога'),
(1, 1, '2024-02-22 14:00:00', '2024-02-22 14:30:00', 'done', 'Консультація кардіолога', 'Коригування дози ліків'),
(1, 20, '2025-12-15 09:00:00', '2025-12-15 09:20:00', 'scheduled', 'Щорічний чекап', 'Здача аналізів'),

(2, 20, '2023-11-12 11:00:00', '2023-11-12 11:20:00', 'done', 'Біль у коліні', 'Направлення до травматолога'),
(2, 2, '2023-11-14 15:00:00', '2023-11-14 15:30:00', 'cancelled', 'Консультація травматолога', 'Лікар захворів, візит скасовано клінікою'),
(2, 2, '2023-11-20 10:00:00', '2023-11-20 10:30:00', 'done', 'Консультація травматолога', 'Призначено фізіотерапію'),
(2, 20, '2025-11-28 11:00:00', '2025-11-28 11:20:00', 'scheduled', 'Повторний рецепт', 'Знеболюючі'),

(3, 20, '2024-08-01 14:00:00', '2024-08-01 14:20:00', 'done', 'Задишка', 'Підозра на бронхіт'),
(3, 20, '2024-08-05 14:00:00', '2024-08-05 14:20:00', 'no-show', 'Контроль лікування', 'Не з`явилась'),

(4, 20, '2025-01-10 09:30:00', '2025-01-10 09:50:00', 'scheduled', 'Профілактика', 'Вакцинація'),

(5, 20, '2024-04-10 12:00:00', '2024-04-10 12:20:00', 'cancelled', 'Головний біль', 'Скасовано пацієнтом (покращення стану)'),

(6, 20, '2024-09-15 16:00:00', '2024-09-15 16:20:00', 'done', 'Погіршення зору', 'Направлення до окуліста'),
(6, 6, '2024-09-20 11:00:00', '2024-09-20 11:30:00', 'done', 'Підбір окулярів', 'Міопія слабкого ступеня'),

(7, 20, '2023-12-05 10:00:00', '2023-12-05 10:20:00', 'done', 'Біль у спині', 'Радикуліт'),

(8, 21, '2024-01-20 09:00:00', '2024-01-20 09:20:00', 'done', 'ГРВІ', 'Відкрито лікарняний'),
(8, 21, '2024-01-25 09:00:00', '2024-01-25 09:20:00', 'done', 'Закриття лікарняного', 'Одужання'),

(9, 21, '2024-05-15 13:30:00', '2024-05-15 13:50:00', 'no-show', 'Алергія', 'Забув прийти'),
(9, 21, '2024-05-16 13:30:00', '2024-05-16 13:50:00', 'done', 'Алергія', 'Призначено антигістамінні'),

(10, 21, '2023-06-10 15:00:00', '2023-06-10 15:20:00', 'done', 'Підтвердження вагітності', 'Направлення до гінеколога'),
(10, 7, '2023-06-12 10:00:00', '2023-06-12 10:30:00', 'done', 'Постановка на облік', '10 тижнів'),
(10, 21, '2025-12-01 10:00:00', '2025-12-01 10:20:00', 'scheduled', 'Огляд після пологів', 'Загальний стан'),

(11, 21, '2024-10-12 11:00:00', '2024-10-12 11:20:00', 'cancelled', 'Кашель', 'Лікар у відпустці'),

(12, 21, '2025-02-14 10:45:00', '2025-02-14 11:00:00', 'scheduled', 'Довідка для водіння', 'Огляд'),

(13, 21, '2024-09-01 14:00:00', '2024-09-01 14:20:00', 'done', 'Довідка для університету', 'Видано форму 086'),

(14, 21, '2024-03-08 09:00:00', '2024-03-08 09:20:00', 'no-show', 'Святковий день', 'Помилковий запис'),

(15, 22, '2024-07-20 08:30:00', '2024-07-20 08:50:00', 'done', 'Забій ноги', 'Направлення на рентген'),
(15, 2, '2024-07-20 11:00:00', '2024-07-20 11:30:00', 'done', 'Рентген', 'Перелому немає'),

(16, 22, '2023-11-15 12:00:00', '2023-11-15 12:20:00', 'done', 'Безсоння', 'Рекомендовано режим дня'),

(17, 22, '2025-01-20 10:15:00', '2025-01-20 10:35:00', 'scheduled', 'Біль у шлунку', 'Консультація'),

(18, 22, '2024-12-10 15:00:00', '2024-12-10 15:20:00', 'scheduled', 'Плановий огляд', 'Скарг немає'),

(19, 22, '2023-05-25 09:45:00', '2023-05-25 10:05:00', 'done', 'Задишка', 'Направлення до кардіолога'),
(19, 1, '2023-05-27 10:00:00', '2023-05-27 10:30:00', 'done', 'ЕКГ', 'Аритмія'),
(19, 1, '2024-06-01 10:00:00', '2024-06-01 10:30:00', 'cancelled', 'Повторний огляд', 'Скасовано пацієнтом'),

(20, 22, '2024-04-05 13:20:00', '2024-04-05 13:40:00', 'done', 'Висип на обличчі', 'Направлення до дерматолога'),
(20, 15, '2024-04-10 14:00:00', '2024-04-10 14:30:00', 'done', 'Акне', 'Призначено лікування'),

(21, 22, '2024-02-14 11:30:00', '2024-02-14 11:50:00', 'done', 'Грип', 'Лікарняний'),

(22, 23, '2024-11-10 14:00:00', '2024-11-10 14:20:00', 'done', 'Мігрень', 'Консультація'),

(23, 23, '2025-11-28 10:30:00', '2025-11-28 10:50:00', 'scheduled', 'Біль у горлі', 'Огляд'),

(24, 23, '2023-09-15 16:15:00', '2023-09-15 16:35:00', 'done', 'Біль у попереку', 'Направлення на УЗД'),
(24, 10, '2023-09-16 09:00:00', '2023-09-16 09:30:00', 'done', 'УЗД нирок', 'Пісок у нирках'), 

(25, 23, '2024-01-20 11:00:00', '2024-01-20 11:20:00', 'no-show', 'Травма пальця', 'Не прийшов'),

(26, 23, '2025-12-05 15:45:00', '2025-12-05 16:00:00', 'scheduled', 'Щеплення', 'Гепатит Б (3-тя доза)'),

(27, 23, '2024-08-10 09:20:00', '2024-08-10 09:40:00', 'done', 'Аритмія', 'Направлення до кардіолога'),
(27, 1, '2024-08-15 11:00:00', '2024-08-15 11:30:00', 'cancelled', 'Консультація кардіолога', 'Лікар на операції'),

(28, 23, '2024-05-05 12:00:00', '2024-05-05 12:20:00', 'done', 'Цистит', 'Гострий біль'),

(29, 23, '2024-11-25 13:00:00', '2024-11-25 13:20:00', 'done', 'Профілактика', 'Здоровий'),

(30, 23, '2024-05-14 14:30:00', '2024-05-14 14:50:00', 'done', 'Слабкість', 'Низький гемоглобін'),
(30, 23, '2024-12-20 14:30:00', '2024-12-20 14:50:00', 'scheduled', 'Контроль аналізів', 'Після курсу заліза');

-- 6) Діагнози
CREATE TABLE IF NOT EXISTS diagnoses (
    id INT AUTO_INCREMENT PRIMARY KEY,
    visit_id INT NOT NULL,
    patient_id INT NOT NULL,
    description VARCHAR(512),
    primary_diag BOOLEAN DEFAULT FALSE,
    recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (visit_id) REFERENCES visits(id) ON DELETE CASCADE,
    FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE
) ENGINE=InnoDB;

INSERT INTO diagnoses (visit_id, patient_id, description, primary_diag) VALUES
(1, 1, 'Гіпертонічна хвороба II ступеня', TRUE),
(2, 1, 'Гіпертензивне серце без застійної серцевої недостатності', FALSE),
(6, 2, 'Гонартроз (артроз колінного суглоба)', TRUE),
(9, 3, 'Гострий бронхіт неуточнений', TRUE),
(10, 3, 'Ішемічна хвороба серця', TRUE),
(14, 6, 'Міопія слабкого ступеня обох очей', TRUE),
(15, 7, 'Попереково-крижовий радикуліт', TRUE),
(16, 8, 'Гостра респіраторна вірусна інфекція (ГРВІ)', TRUE),
(19, 9, 'Сезонний алергічний риніт', TRUE),
(21, 10, 'Вагітність 10 тижнів', TRUE),
(23, 11, 'Гострий обструктивний бронхіт', TRUE),
(28, 15, 'Забій м’яких тканин гомілки', TRUE),
(33, 19, 'Миготлива аритмія', TRUE),
(36, 20, 'Вугрова хвороба (Акне)', TRUE),
(37, 21, 'Грип, вірус не ідентифікований', TRUE),
(38, 22, 'Мігрень без аури', TRUE),
(41, 24, 'Сечокам’яна хвороба', TRUE),
(44, 27, 'Порушення серцевого ритму неуточнене', TRUE),
(46, 28, 'Гострий цистит', TRUE),
(48, 30, 'Залізодефіцитна анемія', TRUE);

-- 7) Декларації
CREATE TABLE IF NOT EXISTS declarations (
    id INT AUTO_INCREMENT PRIMARY KEY,
    patient_id INT NOT NULL,
    doctor_id INT NOT NULL,
    signed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    active BOOLEAN DEFAULT TRUE,
    UNIQUE KEY ux_patient_doctor (patient_id, doctor_id),
    FOREIGN KEY (patient_id) REFERENCES patients(id) ON DELETE CASCADE,
    FOREIGN KEY (doctor_id) REFERENCES staff(id) ON DELETE CASCADE
) ENGINE=InnoDB;

INSERT INTO declarations (patient_id, doctor_id, signed_at) VALUES
(1, 20, '2020-01-15 10:00:00'),
(2, 20, '2021-03-20 11:30:00'),
(3, 20, '2019-11-05 09:15:00'),
(4, 20, '2022-06-12 14:00:00'),
(5, 20, '2023-01-20 16:45:00'),
(6, 20, '2020-09-09 10:20:00'),
(7, 20, '2021-12-30 12:00:00'),

(8, 21, '2020-02-10 09:00:00'),
(9, 21, '2021-05-15 13:30:00'),
(10, 21, '2019-08-22 15:15:00'),
(11, 21, '2022-07-01 11:00:00'),
(12, 21, '2023-03-14 10:45:00'),
(13, 21, '2020-10-10 14:20:00'),
(14, 21, '2021-01-18 16:00:00'),

(15, 22, '2020-03-05 08:30:00'),
(16, 22, '2021-04-25 12:45:00'),
(17, 22, '2019-12-12 10:15:00'),
(18, 22, '2022-08-08 15:00:00'),
(19, 22, '2023-02-28 09:45:00'),
(20, 22, '2020-11-20 13:20:00'),
(21, 22, '2021-09-01 11:30:00'),

(22, 23, '2020-04-18 14:00:00'),
(23, 23, '2021-06-10 10:30:00'),
(24, 23, '2019-10-05 16:15:00'),
(25, 23, '2022-09-19 11:00:00'),
(26, 23, '2023-04-12 15:45:00'),
(27, 23, '2020-05-25 09:20:00'),
(28, 23, '2021-11-11 12:00:00'),
(29, 23, '2023-05-05 13:00:00'),
(30, 23, '2023-06-01 14:30:00');

-- Індекси
CREATE INDEX idx_staff_name ON staff (last_name, first_name, middle_name);
CREATE INDEX idx_patients_name ON patients (last_name, first_name, middle_name);
CREATE INDEX idx_visits_patient_date ON visits (patient_id, scheduled_start);
CREATE INDEX idx_visits_doctor_date ON visits (doctor_id, scheduled_start);

SET FOREIGN_KEY_CHECKS = 1;
